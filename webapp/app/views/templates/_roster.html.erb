<div ng-show="rosters.currentRoster">
  <div class="contest-info">
    <div class="relative clearfix">
      <a href="javascript://" class="btn btn-inverse btn-cancel-entry" ng-show="rosters.inProgressRoster" ng-click="rosters.cancel()">Cancel entry</a>
      <a href="#/market/{{markets.currentMarket.id}}" class="btn btn-inverse btn-cancel-entry" ng-hide="rosters.inProgressRoster">Back to Contests</a>
      <img ng-src="/assets/icon-{{rosters.currentRoster.contest_type.name}}.png" class="contest-info-image" />
      <div class="contest-info-description">
        <h2>{{rosters.currentRoster.contest_type.description}}</h2>
        <ul>
          <li>Starts: {{markets.currentMarket.started_at | shortFormTime }}</li>
          <li>Timeframe: {{markets.currentMarket.name}}</li>
          <li>Entries: {{rosters.currentRoster.contest_type.max_entries | unlimitedIfZero}}</li>
          <li>Buy-in: {{rosters.currentRoster.contest_type.buy_in | centsToDollars }}</li>
          <li>Format: Winner take all
          <li ng-show="rosters.currentRoster.contest_rank">Rank: {{rosters.currentRoster.contest_rank | ordinal }} of {{rosters.currentRoster.contest.num_rosters}}</li>
      </div>
    </div>

    <ul class="games clearfix">
      <li class="game" ng-repeat="game in games" ng-class="{started: gameStarted(game)}" >
        {{game.away_team}} @ {{game.home_team}} <br/>  on {{game.game_time | shortFormTime}} <br/> {{game.network}}
      </li>
    </ul>
  </div>

  <p class="alert alert-info" ng-show="market.state == 'published'">
    This market's bell hasn't rung yet. That means all prices are indicative. This helps keep our market fair. <a class="" href="/#rules">Learn More</a>.
  </p>

  <div ng-show="rosters.currentRoster.contest_id && inThePast(market.started_at)">
    <table class="table table-striped">
      <thead>
        <th>Rank</th>
        <th>User</th>
        <th>Payout</th>
        <th>Points</th>
      </thead>
      <tbody>
        <tr ng-repeat="roster in leaderboard">
          <td>{{roster.contest_rank}}</td>
          <td>{{roster.owner_name}}</td>
          <td>{{roster.contest_rank_payout}}</td>
          <td>{{roster.score}}</td>
          <td>
            <span ng-show="roster.id == rosters.currentRoster.id">This roster</span>
            <a ng-show="roster.owner_id == currentUser.id && roster.id != rosters.currentRoster.id" href="#/market/{{market.id}}/roster/{{roster.id}}">View roster</a>
            <a ng-show="roster.owner_id != currentUser.id" href="#/market/{{market.id}}/roster/{{rosters.currentRoster.id}}/vs/{{roster.id}}">See their roster</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="entries-container">
    <div class="roster-title my-roster-title">  
      <h3 class="inline-heading"><span ng-show="rosters.currentRoster.owner_id == currentUser.id">Your Team</span><span ng-show="rosters.currentRoster.owner_id != currentUser.id">{{rosters.currentRoster.owner_name}}'s Team</span></h3>

      <div class="salary-cap" ng-show="inThePast(market.started_at)" ng-class="{broke: rosters.currentRoster.remaining_salary <= 0}">
        Salary Remaining: ${{rosters.currentRoster.remaining_salary | number:0}}
      </div>
    </div>
  </div>

  <div class="team-selection clearfix">
    <div ng-controller="IncludeController" ng-init="track({roster: 'rosters.currentRoster'})"><div ng-include="'/team.html'"></div></div>
    <div ng-show="rosters.opponentRoster" ng-controller="IncludeController" ng-init="track({roster: 'rosters.opponentRoster'})"><div ng-include="'/team.html'"></div></div>
    <div ng-hide="rosters.opponentRoster" ng-include="'/players.html'"></div>
  </div>
</div>
